{% extends 'base.html' %}
{% load static %}

{%  block content %}
<div class="container-lg">
    <!-- RECORD INFORMATION ROW -->
    <div class="row">
        <div class="col-12 col-md-12 col-lg-5 mt-3">
            <header>
                <h5 class="roboto-mono-font text-center mb-2"><strong>{{ record.title }}</strong></h5>
                <h6 class="roboto-mono-font text-center"><em>{{ record.artist }}</em></h6>
            </header>
            <section class="d-flex justify-content-between">
                <div class="roboto-mono-font">
                    <p><strong>Label:</strong> {{ record.record_label }}</p>
                </div>
                <div class="roboto-mono-font">
                    <p><strong>Condition:</strong> {{ record.condition }}</p>
                </div>
            </section>
            <div class="img-container">
                {% if record.image %}
                <a href="{{ record.image.url }}" target="_blank">
                    <img class="card-img-top img-fluid rounded-0" src="{{ record.image.url }}"
                        alt="{{ record.title }} cover art">
                </a>
                {% else %}
                <a href="{% url 'show_record_details' record.slug %}">
                    <img class="card-img-top img-fluid" src="{{ MEDIA_URL }}no-image-available.jpg"
                        alt="No image available">
                </a>
                {% endif %}
            </div>
            <!-- PRICE & RELEASE YEAR CONTAINER -->
            <section class="d-flex justify-content-between mt-2">
                <div class="roboto-mono-font">
                    <p class="mb-0"><strong>Price:</strong> Â£{{ record.price }}</p>
                </div>
                <div class="roboto-mono-font">
                    <p class="mb-0"><strong>Release Year:</strong> {{ record.release_year }}</p>
                </div>
            </section>
            <!-- GENRE & HOT PICK CONTAINER -->
            <div class="d-flex justify-content-between mt-2">
                <div class="roboto-mono-font">
                    <p class="mb-2"><strong>Genre:</strong> {{ record.genre }}</p>
                </div>
                {% if record.hot_pick %}
                <div class="roboto-mono-font">
                    <p class="mb-2"><i class="fa-solid fa-fire-flame-curved"></i> Wax Crate Hot Pick!</p>
                </div>
                {% endif %}
            </div>
            <!-- CART & QTY CONTAINER -->
            <div class="d-flex justify-content-between">
                <input class="qty-input" type="number" name="quantity" id="quantity" value="1">
                <button class="hvr-grow-shadow roboto-mono-font btn btn-sm rounded-0 add-cart-btn"><i
                        class="fas fa-cart-shopping"></i> Add to cart</button>
            </div>
            <!-- MOBILE LISTEN, TRACKLIST & DESCRIPTION SECTION -->
            <section class="mt-3 d-lg-none">
                {% if record.has_link %}
                    <a class="listen-button btn btn-large dark-cta-button hvr-grow rounded-0 w-100 roboto-mono-font mb-2" href="{{ record.link_to_music }}" target="_blank"><i class="fa-solid fa-headphones"></i> Have a listen?</a>
                {% else %}
                    <h6 class="text-muted roboto-mono-font text-center mb-2"><i class="fa-solid fa-xmark"></i> Sorry, it looks like we couldnt find a link to a digital version :(</h6>
                {% endif %}
                <div class="accordion mb-2" id="tracklistDescListenAccordion">
                    <div class="accordion-item">
                        <h2 class="accordion-header" id="tracklistAccordionHeader">
                            <button class="accordion-button rounded-0 collapsed roboto-mono-font wax-crate-navy-bg wax-crate-grey-font white-border-bottom-seperator" type="button" data-bs-toggle="collapse"
                                data-bs-target="#tracklistAccordionBody" aria-expanded="false"
                                aria-controls="collapseTwo">
                                Tracklist
                            </button>
                        </h2>
                        <div id="tracklistAccordionBody" class="accordion-collapse collapse"
                            aria-labelledby="headingTwo" data-bs-parent="#tracklistDescListenAccordion">
                            <div class="accordion-body text-left roboto-mono-font mobile-accordion-body-text">
                                {{  record.tracklist | safe }}
                            </div>
                        </div>
                    </div>
                    <div class="accordion-item">
                        <h2 class="accordion-header" id="headingThree">
                            <button class="accordion-button rounded-0 collapsed accordion-button collapsed roboto-mono-font wax-crate-navy-bg wax-crate-grey-font" type="button" data-bs-toggle="collapse"
                                data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                                Description
                            </button>
                        </h2>
                        <div id="collapseThree" class="accordion-collapse collapse" aria-labelledby="headingThree"
                            data-bs-parent="#tracklistDescListenAccordion">
                            <div class="accordion-body text-center roboto-mono-font mobile-accordion-body-text">
                                {{ record.description | safe }}
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </div>
</div>
{% endblock %}